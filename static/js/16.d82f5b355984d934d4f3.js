webpackJsonp([16],{IIy8:function(t,e){},Xu7u:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("L/Zn"),o=a("prc4"),i=a("AuGX"),s={name:"news_index",components:{mainTable:r.a,paging:o.a,tinymce:i.a},data:function(){var t=this;return{url:{add:"news/add.do",edit:"news/edit.do",delete:"news/delete.do",batchDelete:"news/batchDelete.do",batchPublish:"news/batchPublish.do",newsSource:"communal/news/sources.do"},tinymceId:"news",pager:{data:[{id:"22972",areaId:"659007",url:"",title:"光明新区周家大道（马田段）土地整备攻坚战告捷",newsSrc:"绿色光明网",content:"今鞍山道卡萨丁",date:"",image:"http://iguangming.sznews.com/images/attachement/png/site640/20171220/IMG889ffafebae246370159022.PNG",commentNum:"789",upvoteNum:"798",shareNum:"897",status:"0",detailAddress:"深圳市光明新区"},{id:"22970",areaId:"659007",url:"",title:"光明新区首设全待行路口 提升道路通行能力",newsSrc:"绿色光明网",content:"阿斯顿",date:"",image:"http://iguangming.sznews.com/images/attachement/jpg/site640/20171220/IMGb083feb941e04637355087.jpg",commentNum:"123",upvoteNum:"132",shareNum:"312",status:"1",detailAddress:"深圳市光明新区"},{id:"22968",areaId:"659005",url:"",title:"观湖街道“上围艺术+”党群驿站揭牌启用",newsSrc:"龙华网",content:"为人头就偶尔提",date:"",image:"http://ilonghua.sznews.com/images/attachement/jpg/site1011/20171219/IMG74e543574fc54636456847.jpg",commentNum:"456",upvoteNum:"465",shareNum:"654",status:"2",detailAddress:"深圳市龙华新区"}],url:"news/dataGrid.do",sort:"createTime",order:"desc"},previewModal:!1,currDialog:"add",dialogShow:!1,dialogSubmitLoading:!1,derail_address_arr:[],derail_address_obj_s:[],batchOprArr:[],newsSource:[],previewData:{title:"",newsSrc:"",date:"",content:""},formSearch:{startTime:"",endTime:"",province:0,city:0,type:null,lockStatus:null,title:null,areaType:"0"},formDialog:{id:"",areaId:"",url:"",title:"",newsSrc:"",content:"",date:"",image:"",commentNum:"",upvoteNum:"",shareNum:"",status:"",detailAddress:""},columns:[{type:"selection",width:80,fixed:"left",align:"center"},{title:"ID",key:"id",width:150,sortable:!0},{title:"区域ID",key:"areaId",width:120,sortable:!0},{title:"新闻图片",key:"image",width:120,sortable:!0,render:function(t,e){return t("img",{attrs:{src:e.row.image,width:80,height:80},style:{border:"1px solid transparent","border-radius":"4px"}})}},{title:"标题",key:"title",width:300,sortable:!0},{title:"新闻来源",key:"newsSrc",width:150,sortable:!0},{title:"关联地区",key:"detailAddress",width:160,sortable:!0},{title:"评论数",key:"commentNum",width:100,sortable:!0},{title:"点赞数",key:"upvoteNum",width:100,sortable:!0},{title:"分享数",key:"shareNum",width:100,sortable:!0},{title:"状态",key:"status",width:100,sortable:!0,render:function(t,e){return t("span",{0:"未发布",1:"未发布",2:"已发布"}[e.row.status])}},{title:"采集时间",key:"createTime",width:160,sortable:!0},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(e,a){var r=t;return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){r.$store.commit("editRow",{vm:r,data:a.row,initDialog:r.initDialog(a.row)})}}},"编辑"),e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){for(var t in r.previewData)r.previewData[t]=a.row[t];r.previewModal=!0}}},"查看"),e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){console.log("发布")}}},"发布"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){r.$Modal.confirm({title:"确认",content:"确认删除这条数据吗？",onOk:function(){r.$store.dispatch("delRow",a.row.id)}})}}},"删除")])}}],rules:{}}},computed:{label:function(){return this.$store.state.label}},methods:{updateSelect:function(t){this.batchOprArr=t},resetSearch:function(t){this.derail_address_obj_s=[],this.$refs[t].resetFields(),this.submitSearch(t)},submitSearch:function(t){this.$store.dispatch("submitSearch",{vm:this,name:t})},batchDelete:function(){console.log("批量删除数据： ",this.batchOprArr)},batchPublish:function(){console.log("批量发布数据： ",this.batchOprArr)},handleSuccess:function(){},resetDialogForm:function(t){this.setContent(""),this.$refs[t].resetFields()},submitDialogForm:function(t){this.util.submitDialogForm(this,t)},setContent:function(t){var e="";t&&(e=t),window.tinymce.get(this.tinymceId).setContent(e)},updateContent:function(t){this.formDialog.content=t},initDialog:function(t){var e=this.util.extend(t);this.setContent(e.content)},changePager:function(t){this.util.changePager(this,t)},paging:function(){this.util.paging(this)},initData:function(){this.derail_address_arr=JSON.parse(sessionStorage.chinaData)}},created:function(){var t=this;t.initData(),t.$store.commit("initPager",t),t.paging(t)},mounted:function(){},watch:{dialogShow:function(t){t||(this.currDialog="add")},derail_address_obj_s:function(t){t.length?this.formSearch.areaId=t[2]:this.formSearch.areaId=""}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"news"},[a("Form",{ref:"formSearch",attrs:{model:t.formSearch,inline:"","label-width":60}},[a("FormItem",{attrs:{label:"关键词",prop:"keyWord"}},[a("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"标题",size:"small"},model:{value:t.formSearch.keyWord,callback:function(e){t.$set(t.formSearch,"keyWord",e)},expression:"formSearch.keyWord"}})],1),t._v(" "),a("FormItem",{attrs:{label:"新闻ID",prop:"id"}},[a("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"新闻ID",size:"small"},model:{value:t.formSearch.id,callback:function(e){t.$set(t.formSearch,"id",e)},expression:"formSearch.id"}})],1),t._v(" "),a("FormItem",{attrs:{label:"来源",prop:"newsSrc"}},[a("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"新闻来源",size:"small"},model:{value:t.formSearch.newsSrc,callback:function(e){t.$set(t.formSearch,"newsSrc",e)},expression:"formSearch.newsSrc"}})],1),t._v(" "),a("FormItem",{attrs:{label:"关联地区",prop:"source"}},[a("Cascader",{staticStyle:{"margin-top":"5px"},attrs:{data:t.derail_address_arr,filterable:"",size:"small"},model:{value:t.derail_address_obj_s,callback:function(e){t.derail_address_obj_s=e},expression:"derail_address_obj_s"}})],1),t._v(" "),a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("Select",{attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:t.formSearch.status,callback:function(e){t.$set(t.formSearch,"status",e)},expression:"formSearch.status"}},[a("Option",{attrs:{value:"1"}},[t._v("未发布")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("已发布")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"采集时间"}},[a("FormItem",{attrs:{prop:"createdateStart"}},[a("DatePicker",{staticStyle:{width:"160px"},attrs:{type:"datetime",placeholder:"点击选择时间",size:"small",clearable:""},model:{value:t.formSearch.createdateStart,callback:function(e){t.$set(t.formSearch,"createdateStart",e)},expression:"formSearch.createdateStart"}})],1),t._v(" "),a("FormItem",[t._v("至")]),t._v(" "),a("FormItem",{attrs:{prop:"createdateEnd"}},[a("DatePicker",{staticStyle:{width:"160px"},attrs:{type:"datetime",placeholder:"点击选择时间",size:"small",clearable:""},model:{value:t.formSearch.createdateEnd,callback:function(e){t.$set(t.formSearch,"createdateEnd",e)},expression:"formSearch.createdateEnd"}})],1)],1),t._v(" "),a("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"ghost",size:"small"},on:{click:function(e){t.resetSearch("formSearch")}}},[t._v(t._s(t.label.clear))]),t._v(" "),a("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitSearch("formSearch")}}},[t._v(t._s(t.label.search))]),t._v(" "),a("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"ghost",disabled:0==t.batchOprArr.length,size:"small"},on:{click:t.batchDelete}},[t._v("批量删除")]),t._v(" "),a("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",disabled:0==t.batchOprArr.length,size:"small"},on:{click:t.batchPublish}},[t._v("批量发布")])],1),t._v(" "),a("mainTable",{attrs:{columns:t.columns,data:t.pager.data},on:{updateSelect:t.updateSelect}}),t._v(" "),a("paging",{attrs:{total:t.pager.total,currPage:t.pager.currPage},on:{changePager:t.changePager,paging:t.paging}}),t._v(" "),a("Modal",{attrs:{title:t.label[t.currDialog],"mask-closable":!1,width:"800"},on:{"on-cancel":function(e){t.resetDialogForm("formDialog")}},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}},[a("Form",{ref:"formDialog",attrs:{model:t.formDialog,rules:t.rules,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"新闻标题",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入标题"},model:{value:t.formDialog.title,callback:function(e){t.$set(t.formDialog,"title",e)},expression:"formDialog.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"新闻来源",prop:"newsSrc"}},[a("Input",{attrs:{placeholder:"请输入新闻来源"},model:{value:t.formDialog.newsSrc,callback:function(e){t.$set(t.formDialog,"newsSrc",e)},expression:"formDialog.newsSrc"}})],1),t._v(" "),a("FormItem",{attrs:{label:"关联地区"}},[a("Input",{attrs:{disabled:!0},model:{value:t.formDialog.detailAddress,callback:function(e){t.$set(t.formDialog,"detailAddress",e)},expression:"formDialog.detailAddress"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"10"}},[a("FormItem",{attrs:{label:"新闻主图",prop:"image"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("div",{staticStyle:{width:"100px",height:"100px",border:"1px solid #eee"}},[t.formDialog.image?a("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.formDialog.image}}):a("img",{staticStyle:{"max-width":"100%"},attrs:{src:"static/images/img-upload-default.png"}})])]),t._v(" "),a("Col",{attrs:{span:"12"}},[a("Upload",{attrs:{name:"upfile",action:"ueditor/upload.do","show-upload-list":!1,"on-success":t.handleSuccess}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.label.uploadImg))])],1)],1)],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"新闻内容",prop:"content"}},[a("tinymce",{attrs:{id:t.tinymceId},on:{updateContent:t.updateContent},model:{value:t.formDialog.content,callback:function(e){t.$set(t.formDialog,"content",e)},expression:"formDialog.content"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){t.resetDialogForm("formDialog")}}},[t._v(t._s(t.label.clear))]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.dialogSubmitLoading},on:{click:function(e){t.submitDialogForm("formDialog")}}},[t._v(t._s(t.label.submit))])],1)],1),t._v(" "),a("Modal",{attrs:{"mask-closable":!1,width:"700",title:"查看"},model:{value:t.previewModal,callback:function(e){t.previewModal=e},expression:"previewModal"}},[a("h2",[t._v(t._s(t.previewData.title))]),t._v(" "),a("br"),t._v(" "),a("p",[t._v(t._s(t.previewData.newsSrc)+"   "+t._s(t.previewData.date))]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"pic",staticStyle:{"overflow-y":"auto","max-height":"500px"},domProps:{innerHTML:t._s(t.previewData.content)}}),t._v(" "),a("br"),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.previewModal=!1}}},[t._v("关闭")])],1)])],1)},staticRenderFns:[]};var n=a("Z0/y")(s,l,!1,function(t){a("IIy8")},"data-v-394754ea",null);e.default=n.exports}});