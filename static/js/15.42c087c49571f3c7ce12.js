webpackJsonp([15],{"5l1L":function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t={name:"resource",components:{mainTable:r("L/Zn").a},data:function(){var e=this;return{url:{add:"resource/add.do",edit:"resource/edit.do",delete:"resource/delete.do"},pager:{data:[{id:"1",name:"权限管理",resourceType:"0",url:"",openMode:"",icon:"",level:"0",seq:1,status:"1",opened:"1",pid:[],permission:""},{id:"11",name:"资源管理",resourceType:"0",url:"/resource/main.do",openMode:"ajax",icon:"",level:"1",seq:1,status:"1",opened:"1",pid:[],permission:"upms:resource:main"},{id:"111",name:"列表",resourceType:"1",url:"/resource/treeGrid.do",openMode:"ajax",icon:"",level:"2",seq:1,status:"1",opened:"1",pid:[],permission:"upms:resource:treeGrid"},{id:"112",name:"添加",resourceType:"1",url:"/resource/add.do",openMode:"ajax",icon:"",level:"2",seq:1,status:"1",opened:"1",pid:[],permission:"upms:resource:add"},{id:"12",name:"角色管理",resourceType:"0",url:"/role/main.do",openMode:"ajax",icon:"",level:"1",seq:1,status:"1",opened:"1",pid:[],permission:"upms:role:main"},{id:"121",name:"列表",resourceType:"1",url:"/role/dataGrid.do",openMode:"ajax",icon:"",level:"2",seq:1,status:"1",opened:"1",pid:[],permission:"upms:role:dataGrid"},{id:"122",name:"添加",resourceType:"1",url:"/role/add.do",openMode:"ajax",icon:"",level:"2",seq:1,status:"1",opened:"1",pid:[],permission:"upms:role:add"},{id:"2",name:"会员管理",resourceType:"0",url:"",openMode:"",icon:"",seq:1,level:"0",status:"1",opened:"1",pid:[],permission:""},{id:"3",name:"新闻管理",resourceType:"0",url:"",openMode:"",icon:"",seq:1,level:"0",status:"1",opened:"1",pid:[],permission:""}],url:"resource/treeGrid.do"},dialogShow:!1,currDialog:"add",dialogSubmitLoading:!1,resourceType:[{value:"0",label:"菜单"},{value:"1",label:"按钮"}],openMode:[{value:"",label:"无(用于上层菜单)"},{value:"ajax",label:"ajax"},{value:"iframe",label:"iframe"}],status:[{value:"1",label:"正常"},{value:"2",label:"关闭"}],opened:{1:"打开",2:"关闭"},pid:[{value:"",label:"",children:[]}],formDialog:{id:"",name:"",resourceType:"",url:"",openMode:"",icon:"",seq:1,status:"1",opened:"1",pid:[],permission:""},columns:[{title:"编号",key:"id",fixed:"left",width:100},{title:"资源名称",key:"name",width:200,render:function(o,r){var t=e,a=20*r.row.level;return o("Button",{props:{type:"text",icon:{0:"chevron-right",1:"ios-arrow-forward",2:"ios-arrow-right"}[r.row.level]},style:{marginLeft:a+"px"},on:{click:function(){t.$store.commit("editRow",{vm:t,data:r.row,initDialog:t.initDialog(r.row)})}}},r.row.name)}},{title:"资源路径",key:"url",width:200},{title:"权限",key:"permission",width:200},{title:"状态",key:"status",width:100,render:function(e,o){return e("span",{1:"正常",2:"停用"}[o.row.status])}},{title:"打开方式",key:"openMode",width:100},{title:"资源类型",key:"resourceType",width:120,render:function(e,o){return e("span",{0:"菜单",1:"按钮"}[o.row.resourceType])}},{title:"图标",key:"iconCls",width:150},{title:"排序",key:"seq"},{title:"操作",key:"action",width:140,align:"center",fixed:"right",render:function(o,r){var t=e;return o("div",[o("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$store.commit("editRow",{vm:t,data:r.row,initDialog:t.initDialog(r.row)})}}},"编辑"),o("Button",{props:{type:"error",size:"small"},on:{click:function(){t.$Modal.confirm({title:"确认",content:"确认删除这条数据吗？",onOk:function(){t.$store.dispatch("delRow",r.row.id)}})}}},"删除")])}}],rules:{name:[{required:!0,message:"资源名称不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}],open:[{required:!0,message:"打开方式不能为空",trigger:"change"}],resourceType:[{required:!0,message:"资源类型不能为空",trigger:"change"}],opened:[{required:!0,message:"菜单状态不能为空",trigger:"change"}]}}},methods:{addRow:function(){this.$store.commit("addRow",this)},initDialog:function(e){},resetDialogForm:function(e){this.$refs[e].resetFields()},submitDialogForm:function(e){this.util.submitDialogForm(this,e)},paging:function(){this.util.paging(this)},initData:function(){}},created:function(){var e=this;e.initData(),e.$store.commit("initPager",e),e.paging(e)},mounted:function(){},computed:{label:function(){return this.$store.state.label}},watch:{dialogShow:function(e){e||(this.currDialog="add")}}},a={render:function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",{staticClass:"resource"},[r("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:e.addRow}},[e._v(e._s(e.label.add))]),e._v(" "),r("mainTable",{attrs:{columns:e.columns,data:e.pager.data}}),e._v(" "),r("Modal",{attrs:{title:e.label[e.currDialog],"mask-closable":!1,width:"750"},on:{"on-cancel":function(o){e.resetDialogForm("formDialog")}},model:{value:e.dialogShow,callback:function(o){e.dialogShow=o},expression:"dialogShow"}},[r("Form",{ref:"formDialog",attrs:{model:e.formDialog,rules:e.rules,"label-width":80}},[r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"资源名称",prop:"name"}},[r("Input",{attrs:{placeholder:"请输入资源名称"},model:{value:e.formDialog.name,callback:function(o){e.$set(e.formDialog,"name",o)},expression:"formDialog.name"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"资源类型",prop:"resourceType"}},[r("Select",{model:{value:e.formDialog.resourceType,callback:function(o){e.$set(e.formDialog,"resourceType",o)},expression:"formDialog.resourceType"}},e._l(e.resourceType,function(o){return r("Option",{key:o.value,attrs:{value:o.value}},[e._v(e._s(o.label))])}))],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"资源路径",prop:"url"}},[r("Input",{model:{value:e.formDialog.url,callback:function(o){e.$set(e.formDialog,"url",o)},expression:"formDialog.url"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"打开方式",prop:"openMode"}},[r("Select",{model:{value:e.formDialog.openMode,callback:function(o){e.$set(e.formDialog,"openMode",o)},expression:"formDialog.openMode"}},e._l(e.openMode,function(o){return r("Option",{key:o.value,attrs:{value:o.value}},[e._v(e._s(o.label))])}))],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"菜单图标",prop:"icon"}},[r("Input",{model:{value:e.formDialog.icon,callback:function(o){e.$set(e.formDialog,"icon",o)},expression:"formDialog.icon"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"排序",prop:"seq"}},[r("Input",{model:{value:e.formDialog.seq,callback:function(o){e.$set(e.formDialog,"seq",o)},expression:"formDialog.seq"}})],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"状态",prop:"status"}},[r("Select",{model:{value:e.formDialog.status,callback:function(o){e.$set(e.formDialog,"status",o)},expression:"formDialog.status"}},e._l(e.status,function(o){return r("Option",{key:o.value,attrs:{value:o.value}},[e._v(e._s(o.label))])}))],1)],1),e._v(" "),r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"上级资源",prop:"pid"}},[r("Select",{model:{value:e.formDialog.pid,callback:function(o){e.$set(e.formDialog,"pid",o)},expression:"formDialog.pid"}},e._l(e.pid,function(o){return r("Option",{key:o.value,attrs:{value:o.value}},[e._v(e._s(o.label))])}))],1)],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"12"}},[r("FormItem",{attrs:{label:"权限",prop:"permission"}},[r("Input",{attrs:{placeholder:"格式如下:upms:resource:add"},model:{value:e.formDialog.permission,callback:function(o){e.$set(e.formDialog,"permission",o)},expression:"formDialog.permission"}})],1)],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:function(o){e.resetDialogForm("formDialog")}}},[e._v(e._s(e.label.clear))]),e._v(" "),r("Button",{attrs:{type:"primary",loading:e.dialogSubmitLoading},on:{click:function(o){e.submitDialogForm("formDialog")}}},[e._v(e._s(e.label.submit))])],1)],1)],1)},staticRenderFns:[]};var i=r("Z0/y")(t,a,!1,function(e){r("bPyP")},"data-v-3a0274c6",null);o.default=i.exports},bPyP:function(e,o){}});