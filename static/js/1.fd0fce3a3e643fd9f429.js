webpackJsonp([1],{Vjeo:function(e,t){},kzCj:function(e,t){},mLa4:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("L/Zn"),n={name:"tree",props:{treeData:Array,loadDataFn:Function},data:function(){return{data:[]}},methods:{treeSelectChange:function(e){console.log("treeSelectNodeArr: ",e)},treeCheckChange:function(e){console.log("treeCheckNodeArr: ",e)},treeToggleExpand:function(e){console.log("nowNode: ",e)}},mounted:function(){}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("Tree",{attrs:{data:this.treeData,"load-data":this.loadDataFn,"show-checkbox":"","empty-text":"加载数据中..."},on:{"on-select-change":this.treeSelectChange,"on-check-change":this.treeCheckChange,"on-toggle-expand":this.treeToggleExpand}})},staticRenderFns:[]};var i=o("Z0/y")(n,r,!1,function(e){o("Vjeo")},"data-v-7ed151c8",null).exports,l=o("TVG1"),c=o("KWv7"),s={name:"role",components:{mainTable:a.a,accessTree:i},data:function(){var e=this;return{url:{add:"role/add.do",edit:"role/edit.do",delete:"role/delete.do"},pager:{data:[{id:"1",name:"admin",seq:0,description:"超级管理员"},{id:"35",name:"网编",seq:0,description:"网编角色"},{id:"36",name:"前端开发",seq:0,description:"前端web开发角色"}],url:"role/dataGrid.do"},currDialog:"add",treeCheckNodeArr:[],treeData:[],opened:!1,selectAll:!1,dialogShow:!1,dialogSubmitLoading:!1,grantShow:!1,formDialog:{id:"",name:"",seq:0,description:""},grantDialog:{},columns:[{title:"id",key:"id",sortable:!0},{title:"名称",key:"name",sortable:!0},{title:"序号",key:"seq",sortable:!0},{title:"描述",key:"description",sortable:!0},{title:"操作",key:"action",align:"center",fixed:"right",width:200,render:function(t,o){var a=e;return"1"===o.row.id?t("Button",{props:{type:"primary",size:"small"},on:{click:function(){a.$store.commit("editRow",{vm:a,data:o.row})}}},"编辑"):t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){var t=e;t.getTreeDataByAppRoutes(),t.selectAll=!!t.checkSelectAll(),t.grantShow=!0}}},"授权"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){a.$store.commit("editRow",{vm:a,data:o.row})}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){a.$Modal.confirm({title:"确认",content:"确认删除这条数据吗？",onOk:function(){a.$store.dispatch("delRow",o.row.id)}})}}},"删除")])}}],rules:{name:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]}}},methods:{addRow:function(){this.$store.commit("addRow",this)},resetDialogForm:function(e){this.$refs[e].resetFields()},submitDialogForm:function(e){this.util.submitDialogForm(this,e)},treeExpand:function(){var e=this;e.treeData.forEach(function(t,o){t.expand=!e.opened}),e.opened=!this.opened},checkSelectAll:function(){for(var e=0;e<this.treeData.length;e++){if(!this.treeData[e].checked)return!1;for(var t=0;t<this.treeData[e].children.length;t++)return!!this.treeData[e].children[t].checked}},treeCheckAll:function(){var e=this;e.treeData.forEach(function(t,o){t.checked=!e.selectAll,t.children.forEach(function(t){t.checked=!e.selectAll})}),e.selectAll=!e.selectAll},treeToggle:function(){this.treeData.forEach(function(e,t){e.checked=!e.checked,e.children.forEach(function(e){e.checked=!e.checked})}),this.selectAll=!!this.checkSelectAll()},loadTreeData:function(e){setTimeout(function(){},1e3)},resetGrantForm:function(e){this.treeData=[]},submitGrantForm:function(e){this.treeData.length||(this.grantShow=!1)},getTreeDataByAppRoutes:function(){var e=[];l.a.extend(c.a).forEach(function(t,o){e.push({title:t.meta.title,name:t.name,access:t.meta.access,checked:!!t.meta.access,expand:!1,children:[]}),t.children.length&&t.children.forEach(function(t){e[o].children.push({title:t.meta.title,name:t.name,checked:!!t.meta.access,expand:!1,access:t.meta.access})})}),this.treeData=e},loadDataFn:function(){},treeCheckChange:function(e){this.selectAll=!!this.checkSelectAll(),console.log("treeCheckNodeArr: ",e),this.treeCheckNodeArr=e},paging:function(){this.util.paging(this)},initData:function(){}},computed:{label:function(){return this.$store.state.label}},created:function(){var e=this;e.initData(),e.$store.commit("initPager",e),e.paging(e)},mounted:function(){},watch:{dialogShow:function(e){e||(this.currDialog="add")}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"role"},[o("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:e.addRow}},[e._v(e._s(e.label.add))]),e._v(" "),o("mainTable",{attrs:{columns:e.columns,data:e.pager.data}}),e._v(" "),o("Modal",{attrs:{title:e.label[e.currDialog],"mask-closable":!1,width:"750"},on:{"on-cancel":function(t){e.resetDialogForm("formDialog")}},model:{value:e.dialogShow,callback:function(t){e.dialogShow=t},expression:"dialogShow"}},[o("Form",{ref:"formDialog",attrs:{model:e.formDialog,rules:e.rules,"label-width":80}},[o("Row",[o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"角色名称",prop:"name"}},[o("Input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.formDialog.name,callback:function(t){e.$set(e.formDialog,"name",t)},expression:"formDialog.name"}})],1)],1),e._v(" "),o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"排序",prop:"seq"}},[o("InputNumber",{attrs:{min:0},model:{value:e.formDialog.seq,callback:function(t){e.$set(e.formDialog,"seq",t)},expression:"formDialog.seq"}})],1)],1)],1),e._v(" "),o("Row",[o("FormItem",{attrs:{label:"描述",prop:"description"}},[o("Input",{attrs:{type:"textarea",placeholder:"请输入描述",rows:3},model:{value:e.formDialog.description,callback:function(t){e.$set(e.formDialog,"description",t)},expression:"formDialog.description"}})],1)],1)],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{on:{click:function(t){e.resetDialogForm("formDialog")}}},[e._v("清空")]),e._v(" "),o("Button",{attrs:{type:"primary",loading:e.dialogSubmitLoading},on:{click:function(t){e.submitDialogForm("formDialog")}}},[e._v("提交")])],1)],1),e._v(" "),o("Modal",{attrs:{title:"授权","mask-closable":!1,width:"550"},on:{"on-cancel":function(t){e.resetGrantForm("grantDialog")}},model:{value:e.grantShow,callback:function(t){e.grantShow=t},expression:"grantShow"}},[o("Form",{ref:"grantDialog",attrs:{model:e.grantDialog,rules:e.rules}},[o("Tree",{attrs:{data:e.treeData,"load-data":e.loadDataFn,"show-checkbox":"","empty-text":"加载数据中..."},on:{"on-check-change":e.treeCheckChange}})],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[e.treeData.length?[o("Button",{on:{click:e.treeExpand}},[e._v(e._s(e.opened?"折叠":"展开"))]),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:e.treeCheckAll}},[e._v(e._s(e.selectAll?"清空":"全选"))]),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:e.treeToggle}},[e._v("反选")])]:e._e(),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:function(t){e.submitGrantForm("grantDialog")}}},[e._v("确定")])],2)],1)],1)},staticRenderFns:[]};var u=o("Z0/y")(s,d,!1,function(e){o("kzCj")},"data-v-36d4b788",null);t.default=u.exports}});