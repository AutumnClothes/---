webpackJsonp([2],{LuW2:function(a,e){},"X/xe":function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t("L/Zn"),o=t("prc4"),l={name:"ad_index",components:{mainTable:r.a,paging:o.a},data:function(){var a=this;return{url:{add:"ad/add.do",edit:"ad/edit.do",delete:"ad/delete.do"},pager:{data:[{id:"380700856033280",userId:"",title:"大溪谷",imagePath:"http://iguangming.sznews.com/images/attachement/png/site640/20171220/IMG889ffafebae246370159022.PNG",imageArr:["http://ilonghua.sznews.com/images/attachement/jpg/site1011/20171219/IMG74e543574fc54636456847.jpg","http://iguangming.sznews.com/images/attachement/jpg/site640/20171220/IMGb083feb941e04637355087.jpg","http://iguangming.sznews.com/images/attachement/png/site640/20171220/IMG889ffafebae246370159022.PNG"],lockStatus:"1",postion:"2",href:"http://www.baidu.com",sort:1,clickNum:"123",detailAddress:"湖北省襄阳市樊城区",startTime:"2017-12-11 17:55:19",endTime:"2017-12-28 17:55:19",isUp:"1",areaType:"1",context:"按时气味儿13"},{id:"380700582551552",userId:"",title:"特色牛肉面",imagePath:"http://iguangming.sznews.com/images/attachement/jpg/site640/20171220/IMGb083feb941e04637355087.jpg",imageArr:["http://iguangming.sznews.com/images/attachement/png/site640/20171220/IMG889ffafebae246370159022.PNG","http://iguangming.sznews.com/images/attachement/jpg/site640/20171220/IMGb083feb941e04637355087.jpg"],lockStatus:"1",postion:"1",href:"http://www.baidu.com",sort:1,clickNum:"345",detailAddress:"湖北省襄阳市樊城区",startTime:"2017-12-11 00:00:00",endTime:"2017-12-28 00:00:00",isUp:"1",areaType:"2",context:"按时规范化"},{id:"380699319488512",userId:"",title:"古城市新襄阳",imagePath:"http://ilonghua.sznews.com/images/attachement/jpg/site1011/20171219/IMG74e543574fc54636456847.jpg",lockStatus:"1",postion:"3",href:"http://www.baidu.com",sort:1,clickNum:"76",detailAddress:"湖北省襄阳市樊城区",startTime:"2017-12-11 00:00:00",endTime:"2017-12-22 00:00:00",isUp:"1",areaType:"3",context:"登革热提前"}],url:"ad/dataGrid.do",tSort:"createTime",order:"desc"},currDialog:"add",dialogShow:!1,dialogSubmitLoading:!1,uploadImgMax:1,derail_address_arr:[],derail_address_arr_s:[],derail_address_obj:[],derail_address_obj_s:[],lockStatus:[{value:"1",label:"正常"},{value:"2",label:"禁用"},{value:"3",label:"过时"}],areaType:[{value:"1",label:"全国"},{value:"2",label:"省级"},{value:"3",label:"市级"},{value:"4",label:"区级"}],postion:[{value:"1",label:"首页banner"},{value:"2",label:"首页新闻列表"},{value:"3",label:"首页新闻详情"},{value:"4",label:"政务banner"},{value:"5",label:"招商banner"},{value:"6",label:"办事指南详情"},{value:"7",label:"便民工具"},{value:"8",label:"广场帖子列表"},{value:"9",label:"帖子详情"}],provinceData:[],cityData:[],areaData:[],countryData:[{label:"中国",value:"000000",children:[]}],formSearch:{startTime:"",endTime:"",type:"",lockStatus:"",title:"",areaType:"4",areaId:""},formDialog:{id:"",userId:"",title:"",imagePath:"",imageArr:[],lockStatus:"1",postion:"1",href:"",sort:1,detailAddress:"",startTime:"",endTime:"",isUp:"1",areaType:"1",areaId:"",context:""},columns:[{title:"ID",key:"id",width:180,fixed:"left",sortable:!0},{title:"标题",key:"title",width:150,sortable:!0},{title:"主图",key:"imagePath",width:120,sortable:!0,render:function(a,e){return a("img",{attrs:{src:e.row.imagePath,width:80,height:80},style:{border:"1px solid transparent","border-radius":"4px",margin:"10px 0"}})}},{title:"链接地址",key:"href",width:250,sortable:!0},{title:"点击次数",key:"clickNum",width:120,sortable:!0},{title:"广告位置",key:"postion",width:120,sortable:!0,render:function(a,e){return a("span",{1:"首页banner",2:"首页新闻列表",3:"首页新闻详情",4:"政务banner",5:"招商banner",6:"办事指南详情",7:"便民工具",8:"广场帖子列表",9:"帖子详情"}[e.row.postion])}},{title:"关联地区",key:"detailAddress",width:170,sortable:!0,render:function(a,e){return a("span",e.row.detailAddress+{1:"",2:" (省)",3:" (市)",4:" (区)"}[e.row.areaType])}},{title:"排序",key:"sort",width:100,sortable:!0},{title:"状态",key:"lockStatus",width:100,sortable:!0,render:function(a,e){var t={1:"正常",2:"禁用",3:"过时"};return 2==e.row.isUp?a("span",t[e.row.lockStatus]+"(置顶)"):a("span",t[e.row.lockStatus])}},{title:"创建人",key:"createBy",width:120,sortable:!0},{title:"开始时间",key:"startTime",width:160,sortable:!0},{title:"结束时间",key:"endTime",width:160,sortable:!0},{title:"创建时间",key:"createTime",width:160,sortable:!0},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(e,t){var r=a;return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){r.$store.commit("editRow",{vm:r,data:t.row,initDialog:r.initDialog(t.row)})}}},"编辑"),e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){console.log("禁用")}}},"禁用"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){r.$Modal.confirm({title:"确认",content:"确认删除这条数据吗？",onOk:function(){r.$store.dispatch("delRow",t.row.id)}})}}},"删除")])}}],rules:{}}},computed:{label:function(){return this.$store.state.label}},methods:{addRow:function(){this.$store.commit("addRow",this)},resetSearch:function(a){this.derail_address_obj_s=[],this.$refs[a].resetFields(),this.submitSearch(a)},submitSearch:function(a){this.$store.dispatch("submitSearch",{vm:this,name:a})},resetDialogForm:function(a){this.derail_address_arr=this.countryData,this.derail_address_obj=[],this.$refs[a].resetFields()},submitDialogForm:function(a){this.util.submitDialogForm(this,a)},beforeUpload:function(){if(this.formDialog.imageArr.length=this.uploadImgMax)return this.$Message.error("上传图片数量已达上限！"),!1},handleSuccess:function(a){},postionChange:function(a){this.formDialog.areaType=1==a||2==a?"1":"4",this.uploadImgMax=3==a?2:4==a?3:1},initDialog:function(){},changePager:function(a){this.util.changePager(this,a)},paging:function(){this.util.paging(this)},initData:function(){var a=this;a.areaData=JSON.parse(sessionStorage.chinaData),a.cityData=a.util.getCityDataByData(JSON.parse(sessionStorage.chinaData)),a.provinceData=a.util.getProvinceDataByData(JSON.parse(sessionStorage.chinaData)),a.derail_address_arr_s=JSON.parse(sessionStorage.chinaData),a.derail_address_arr=a.countryData}},created:function(){var a=this;a.initData(),a.$store.commit("initPager",a),a.paging(a)},mounted:function(){},watch:{dialogShow:function(a){a||(this.currDialog="add")},derail_address_obj_s:function(a){a.length?this.formSearch.areaId=a[2]:this.formSearch.areaId=""},derail_address_obj:function(a){a.length?this.formDialog.areaId=a[2]:this.formDialog.areaId=""},"formSearch.areaType":function(a){var e=this;"1"==a?e.derail_address_arr_s=e.countryData:"2"==a?e.derail_address_arr_s=e.provinceData:"3"==a?e.derail_address_arr_s=e.cityData:"4"==a&&(e.derail_address_arr_s=e.areaData),e.derail_address_obj_s=[]},"formDialog.areaType":function(a){var e=this;"1"==a?e.derail_address_arr=e.countryData:"2"==a?e.derail_address_arr=e.provinceData:"3"==a?e.derail_address_arr=e.cityData:"4"==a&&(e.derail_address_arr=e.areaData),e.derail_address_obj=[]}}},i={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"ad"},[t("Form",{ref:"formSearch",attrs:{model:a.formSearch,inline:"","label-width":60}},[t("FormItem",{attrs:{label:"关键字",prop:"title"}},[t("Input",{attrs:{placeholder:"标题",size:"small"},model:{value:a.formSearch.title,callback:function(e){a.$set(a.formSearch,"title",e)},expression:"formSearch.title"}})],1),a._v(" "),t("FormItem",{attrs:{label:"广告位置",prop:"postion"}},[t("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:a.formSearch.postion,callback:function(e){a.$set(a.formSearch,"postion",e)},expression:"formSearch.postion"}},a._l(a.postion,function(e){return t("Option",{key:e.value,attrs:{value:e.value}},[a._v(a._s(e.label))])}))],1),a._v(" "),t("FormItem",{attrs:{label:"广告状态",prop:"lockStatus"}},[t("Select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:a.formSearch.lockStatus,callback:function(e){a.$set(a.formSearch,"lockStatus",e)},expression:"formSearch.lockStatus"}},a._l(a.lockStatus,function(e){return t("Option",{key:e.value,attrs:{value:e.value}},[a._v(a._s(e.label))])}))],1),a._v(" "),t("FormItem",{attrs:{label:"投放级别",prop:"areaType"}},[t("Select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:a.formSearch.areaType,callback:function(e){a.$set(a.formSearch,"areaType",e)},expression:"formSearch.areaType"}},a._l(a.areaType,function(e){return t("Option",{key:e.value,attrs:{value:e.value}},[a._v(a._s(e.label))])}))],1),a._v(" "),t("FormItem",{attrs:{label:"关联地区"}},[t("Cascader",{staticStyle:{"margin-top":"5px"},attrs:{data:a.derail_address_arr_s,filterable:!0,size:"small"},model:{value:a.derail_address_obj_s,callback:function(e){a.derail_address_obj_s=e},expression:"derail_address_obj_s"}})],1),a._v(" "),t("FormItem",{attrs:{label:"展示时间"}},[t("FormItem",{attrs:{prop:"startTime"}},[t("DatePicker",{attrs:{type:"datetime",placeholder:"点击选择时间",size:"small",clearable:!1},model:{value:a.formSearch.startTime,callback:function(e){a.$set(a.formSearch,"startTime",e)},expression:"formSearch.startTime"}})],1),a._v(" "),t("FormItem",[a._v("至")]),a._v(" "),t("FormItem",{attrs:{prop:"endTime"}},[t("DatePicker",{attrs:{type:"datetime",placeholder:"点击选择时间",size:"small",clearable:!1},model:{value:a.formSearch.endTime,callback:function(e){a.$set(a.formSearch,"endTime",e)},expression:"formSearch.endTime"}})],1)],1),a._v(" "),t("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"ghost",size:"small"},on:{click:function(e){a.resetSearch("formSearch")}}},[a._v(a._s(a.label.clear))]),a._v(" "),t("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:function(e){a.submitSearch("formSearch")}}},[a._v(a._s(a.label.search))]),a._v(" "),t("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:a.addRow}},[a._v(a._s(a.label.add))])],1),a._v(" "),t("mainTable",{attrs:{columns:a.columns,data:a.pager.data}}),a._v(" "),t("paging",{attrs:{total:a.pager.total,currPage:a.pager.currPage},on:{changePager:a.changePager,paging:a.paging}}),a._v(" "),t("Modal",{attrs:{title:a.label[a.currDialog],"mask-closable":!1,width:"750"},on:{"on-cancel":function(e){a.resetDialogForm("formDialog")}},model:{value:a.dialogShow,callback:function(e){a.dialogShow=e},expression:"dialogShow"}},[t("Form",{ref:"formDialog",attrs:{model:a.formDialog,rules:a.rules,"label-width":80}},[t("Row",[t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{label:"标题",prop:"title"}},[t("Input",{attrs:{placeholder:"请输入标题"},model:{value:a.formDialog.title,callback:function(e){a.$set(a.formDialog,"title",e)},expression:"formDialog.title"}})],1)],1)],1),a._v(" "),t("Row",[t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{label:"广告内容",prop:"context"}},[t("Input",{attrs:{placeholder:"请输入广告内容"},model:{value:a.formDialog.context,callback:function(e){a.$set(a.formDialog,"context",e)},expression:"formDialog.context"}})],1)],1)],1),a._v(" "),t("Row",[t("Col",{attrs:{span:"24"}},[t("FormItem",{attrs:{label:"主图",prop:"imagePath"}},[t("Row",[t("Col",{attrs:{span:"16"}},[a.formDialog.imageArr?t("Row",a._l(a.formDialog.imageArr,function(a){return t("Col",{key:a,attrs:{span:"8"}},[t("div",{staticClass:"image-box"},[t("img",{staticClass:"ad-img",attrs:{src:a}})])])})):t("div",{staticClass:"image-box"},[a.formDialog.imagePath?t("img",{staticClass:"ad-img",attrs:{src:a.formDialog.imagePath}}):t("img",{staticClass:"ad-img",attrs:{src:"static/images/img-upload-default.png"}})])],1),a._v(" "),t("Col",{attrs:{span:"8"}},[t("Upload",{attrs:{name:"upfile",action:"ueditor/upload.do","show-upload-list":!1,"before-upload":a.beforeUpload,"on-success":a.handleSuccess}},[t("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[a._v(a._s(a.label.uploadImg))])],1)],1)],1)],1)],1)],1),a._v(" "),t("Row",[t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"链接地址",prop:"href"}},[t("Input",{attrs:{type:"url",placeholder:"请输入链接地址"},model:{value:a.formDialog.href,callback:function(e){a.$set(a.formDialog,"href",e)},expression:"formDialog.href"}})],1)],1),a._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"广告位置",prop:"postion"}},[t("Select",{attrs:{placeholder:"请选择",clearable:""},on:{"on-change":a.postionChange},model:{value:a.formDialog.postion,callback:function(e){a.$set(a.formDialog,"postion",e)},expression:"formDialog.postion"}},a._l(a.postion,function(e){return t("Option",{key:e.value,attrs:{value:e.value}},[a._v(a._s(e.label))])}))],1)],1)],1),a._v(" "),t("Row",[t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"排序",prop:"sort",inline:""}},[t("InputNumber",{attrs:{max:10,min:1,disabled:1==a.formDialog.sort&&2==a.formDialog.isUp},model:{value:a.formDialog.sort,callback:function(e){a.$set(a.formDialog,"sort",e)},expression:"formDialog.sort"}}),a._v(" "),1==a.formDialog.sort?t("Button",{attrs:{type:"default"},on:{click:function(e){a.formDialog.isUp=1==a.formDialog.isUp?2:1}}},[a._v(a._s(1==a.formDialog.isUp?"置顶":"取消置顶"))]):a._e()],1)],1),a._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:""}},[t("span",{staticStyle:{"font-size":"80%",color:"#ff4d44","padding-left":"3px"}},[a._v("\n              数值越小优先级越高\n            ")])])],1)],1),a._v(" "),t("Row",[t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"开始时间",prop:"startTime"}},[t("DatePicker",{attrs:{type:"date",placeholder:"点击选择时间",clearable:!1},model:{value:a.formDialog.startTime,callback:function(e){a.$set(a.formDialog,"startTime",e)},expression:"formDialog.startTime"}})],1)],1),a._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"结束时间",prop:"endTime"}},[t("DatePicker",{attrs:{type:"date",placeholder:"点击选择时间",clearable:!1},model:{value:a.formDialog.endTime,callback:function(e){a.$set(a.formDialog,"endTime",e)},expression:"formDialog.endTime"}})],1)],1)],1),a._v(" "),t("Row",[t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"投放级别",prop:"areaType"}},[t("Select",{attrs:{placeholder:"请选择"},model:{value:a.formDialog.areaType,callback:function(e){a.$set(a.formDialog,"areaType",e)},expression:"formDialog.areaType"}},a._l(a.areaType,function(e){return t("Option",{key:e.value,attrs:{value:e.value}},[a._v(a._s(e.label))])}))],1)],1),a._v(" "),t("Col",{attrs:{span:"12"}},[t("FormItem",{attrs:{label:"关联地区"}},[t("Cascader",{attrs:{data:a.derail_address_arr,placeholder:"选择关联地区",clearabled:!1},model:{value:a.derail_address_obj,callback:function(e){a.derail_address_obj=e},expression:"derail_address_obj"}})],1)],1)],1)],1),a._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("Button",{on:{click:function(e){a.resetDialogForm("formDialog")}}},[a._v(a._s(a.label.clear))]),a._v(" "),t("Button",{attrs:{type:"primary",loading:a.dialogSubmitLoading},on:{click:function(e){a.submitDialogForm("formDialog")}}},[a._v(a._s(a.label.submit))])],1)],1)],1)},staticRenderFns:[]};var s=t("Z0/y")(l,i,!1,function(a){t("LuW2")},"data-v-f7953c34",null);e.default=s.exports}});