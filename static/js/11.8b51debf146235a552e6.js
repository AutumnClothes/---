webpackJsonp([11],{"FHp+":function(t,a){},Pd3n:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("L/Zn"),o=e("TVG1"),i={name:"workClass",components:{mainTable:s.a},data:function(){var t=this;return{url:{add:"workClass/add.do",edit:"workClass/edit.do",delete:"workClass/delete.do"},pager:{data:[{id:"215465465",className:"沙发斯蒂芬",classIcon:"http://img.taopic.com/uploads/allimg/120727/201995-120HG1030762.jpg",classType:"1",cityCode:"410100",classStatus:"1"},{id:"215465415",className:"温热无若",classIcon:"http://img.zcool.cn/community/01690955496f930000019ae92f3a4e.jpg@2o.jpg",classType:"0",cityCode:"411000",classStatus:"0"},{id:"215465462",className:"沃尔沃二",classIcon:"http://img.zcool.cn/community/0142135541fe180000019ae9b8cf86.jpg@1280w_1l_2o_100sh.png",classType:"1",cityCode:"410500",classStatus:"1"}],url:"workClass/dataGrid.do"},currDialog:"add",dialogShow:!1,dialogSubmitLoading:!1,derail_address_obj_s:[],provinceCityData:[],provinceCity:[],detialAddressJson:{},chinaJson:{},formSearch:{input:"",className:"",classStatus:"",classType:"",cityCode:""},formDialog:{id:"",className:"",classIcon:"",classType:"",cityCode:"",classStatus:"1"},columns:[{title:"编号",key:"id",fixed:"left",width:200},{title:"分类名称",key:"className"},{title:"关联区域",key:"cityCode",render:function(a,e){var s="无cityCode";return e.row.cityCode&&(s=t.getAddrByCityId(e.row.cityCode)),a("span",s)}},{title:"分类状态",key:"classStatus",render:function(t,a){return t("span",{0:"无效",1:"有效"}[a.row.classStatus])}},{title:"分类图标",key:"classIcon",render:function(t,a){return a.row.classIcon?t("img",{style:{margin:"5px 0",maxWidth:"100%",maxHeight:"100%"},attrs:{src:a.row.classIcon}}):t("span","暂无图标")}},{title:"分类类型",key:"classType",render:function(t,a){return t("span",{0:"个人",1:"企业"}[a.row.classType])}},{title:"操作",key:"action",width:140,align:"center",fixed:"right",render:function(a,e){var s=t;return a("div",[a("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){s.$store.commit("editRow",{vm:s,data:e.row,initDialog:s.initDialog(e.row)})}}},"编辑"),a("Button",{props:{type:"error",size:"small"},on:{click:function(){s.$Modal.confirm({title:"确认",content:"确认删除这条数据吗？",onOk:function(){s.$store.dispatch("delRow",e.row.id)}})}}},"删除")])}}],rules:{className:[{required:!0,message:"请填写分类名称",trigger:"blur"}],classType:[{required:!0,message:"分类类别不能为空",trigger:"change"}]},searchRules:{}}},methods:{addRow:function(){this.$store.commit("addRow",this)},initDialog:function(t){var a=o.a.extend(t);this.provinceCity=[a.cityCode.toString().slice(0,2)+"0000",a.cityCode.toString().slice(0,4)+"00",a.cityCode.toString()]},resetSearch:function(t){this.derail_address_obj_s=[],this.$refs[t].resetFields(),this.submitSearch(t)},submitSearch:function(t){this.$store.dispatch("submitSearch",{vm:this,name:t})},resetDialogForm:function(t){this.provinceCity=[],this.formDialog.classIcon="",this.formDialog.cityCode="",this.$refs[t].resetFields()},submitDialogForm:function(t){this.util.submitDialogForm(this,t)},searchAddrChange:function(t){this.formSearch.cityCode=t[1]},addrChange:function(t){this.formDialog.cityCode=t[1]},handleSuccess:function(t,a){"SUCCESS"==t.state&&(this.$Message.success("上传成功！"),this.formDialog.classIcon=t.url)},handleFormatError:function(){this.$Message.error("文件格式错误，请选择jpg,jpeg或png格式的文件")},getAddrByCityId:function(t){var a=o.a.extend(JSON.parse(sessionStorage.chinaJson)),e=(""+t).slice(0,2)+"0000",s=(""+t).slice(0,4)+"00";return a[1e5][e]+a[e][s]},paging:function(){this.util.paging(this)},initData:function(){var t=JSON.parse(sessionStorage.chinaJson),a=JSON.parse(sessionStorage.chinaData),e=o.a.extend(a);e.forEach(function(t){t.children.forEach(function(t){t.children=[]})}),this.provinceCityData=o.a.extend(e),this.chinaJson=t}},computed:{label:function(){return this.$store.state.label}},watch:{dialogShow:function(t){t||(this.currDialog="add")}},created:function(){var t=this;t.initData(),t.$store.commit("initPager",t),t.paging(t)},mounted:function(){}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"work-class"},[e("Form",{ref:"formSearch",attrs:{model:t.formSearch,rules:t.searchRules,inline:"","label-width":60}},[e("FormItem",{attrs:{label:"分类名称",prop:"className"}},[e("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"分类名称",size:"small"},model:{value:t.formSearch.className,callback:function(a){t.$set(t.formSearch,"className",a)},expression:"formSearch.className"}})],1),t._v(" "),e("FormItem",{attrs:{label:"关联地区"}},[e("Cascader",{staticStyle:{"margin-top":"5px"},attrs:{data:t.provinceCityData,filterable:"",size:"small"},on:{"on-change":t.searchAddrChange},model:{value:t.derail_address_obj_s,callback:function(a){t.derail_address_obj_s=a},expression:"derail_address_obj_s"}})],1),t._v(" "),e("FormItem",{attrs:{label:"状态",prop:"classStatus"}},[e("Select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:t.formSearch.classStatus,callback:function(a){t.$set(t.formSearch,"classStatus",a)},expression:"formSearch.classStatus"}},[e("Option",{attrs:{value:"0"}},[t._v("无效")]),t._v(" "),e("Option",{attrs:{value:"1"}},[t._v("有效")])],1)],1),t._v(" "),e("FormItem",{attrs:{label:"分类类型",prop:"classType"}},[e("Select",{staticStyle:{width:"80px"},attrs:{size:"small"},model:{value:t.formSearch.classType,callback:function(a){t.$set(t.formSearch,"classType",a)},expression:"formSearch.classType"}},[e("Option",{attrs:{value:"0"}},[t._v("个人")]),t._v(" "),e("Option",{attrs:{value:"1"}},[t._v("企业")])],1)],1),t._v(" "),e("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"ghost",size:"small"},on:{click:function(a){t.resetSearch("formSearch")}}},[t._v(t._s(t.label.clear))]),t._v(" "),e("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:function(a){t.submitSearch("formSearch")}}},[t._v(t._s(t.label.search))]),t._v(" "),e("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:t.addRow}},[t._v(t._s(t.label.add))])],1),t._v(" "),e("mainTable",{attrs:{columns:t.columns,data:t.pager.data}}),t._v(" "),e("Modal",{attrs:{title:t.label[t.currDialog],"mask-closable":!1,width:"750"},on:{"on-cancel":function(a){t.resetDialogForm("formDialog")}},model:{value:t.dialogShow,callback:function(a){t.dialogShow=a},expression:"dialogShow"}},[e("Form",{ref:"formDialog",attrs:{model:t.formDialog,rules:t.rules,"label-width":80}},[e("Row",[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"分类名称",prop:"className"}},[e("Input",{attrs:{placeholder:"请输入分类名称"},model:{value:t.formDialog.className,callback:function(a){t.$set(t.formDialog,"className",a)},expression:"formDialog.className"}})],1)],1),t._v(" "),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"分类类别",prop:"classType"}},[e("Select",{model:{value:t.formDialog.classType,callback:function(a){t.$set(t.formDialog,"classType",a)},expression:"formDialog.classType"}},[e("Option",{attrs:{value:"0"}},[t._v("个人")]),t._v(" "),e("Option",{attrs:{value:"1"}},[t._v("企业")])],1)],1)],1)],1),t._v(" "),e("Row",[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"关联区域"}},[e("Cascader",{attrs:{data:t.provinceCityData,filterable:""},on:{"on-change":t.addrChange},model:{value:t.provinceCity,callback:function(a){t.provinceCity=a},expression:"provinceCity"}})],1)],1),t._v(" "),e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"分类状态",prop:"classStatus"}},[e("Select",{attrs:{placeholder:"请选择状态"},model:{value:t.formDialog.classStatus,callback:function(a){t.$set(t.formDialog,"classStatus",a)},expression:"formDialog.classStatus"}},[e("Option",{attrs:{value:"0"}},[t._v("无效")]),t._v(" "),e("Option",{attrs:{value:"1"}},[t._v("有效")])],1)],1)],1)],1),t._v(" "),e("Row",[e("Col",{attrs:{span:"12"}},[e("FormItem",{attrs:{label:"事项图标"}},[e("Row",[e("Col",{attrs:{span:"12"}},[e("div",{staticStyle:{width:"130px",border:"1px solid #eee"}},[t.formDialog.classIcon?e("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.formDialog.classIcon}}):e("img",{staticStyle:{"max-width":"100%"},attrs:{src:"static/images/img-upload-default.png"}})])]),t._v(" "),e("Col",{staticStyle:{"text-align":"right"},attrs:{span:"12"}},[e("Upload",{attrs:{name:"upfile",action:"ueditor/upload.do","on-success":t.handleSuccess,"show-upload-list":!1,format:["jpg","jpeg","png"],"on-format-error":t.handleFormatError}},[e("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.label.uploadImg))])],1)],1)],1)],1)],1)],1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("Button",{on:{click:function(a){t.resetDialogForm("formDialog")}}},[t._v(t._s(t.label.clear))]),t._v(" "),e("Button",{attrs:{type:"primary",loading:t.dialogSubmitLoading},on:{click:function(a){t.submitDialogForm("formDialog")}}},[t._v(t._s(t.label.submit))])],1)],1)],1)},staticRenderFns:[]};var l=e("Z0/y")(i,r,!1,function(t){e("FHp+")},"data-v-5d884d0c",null);a.default=l.exports}});