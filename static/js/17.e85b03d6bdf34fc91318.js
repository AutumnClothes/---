webpackJsonp([17],{"31VF":function(t,e){},"Sv+t":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("L/Zn"),o=a("prc4"),i=a("AuGX"),s={name:"gover_index",components:{mainTable:r.a,paging:o.a,tinymce:i.a},data:function(){var t=this;return{url:{add:"gover/add.do",edit:"gover/edit.do",delete:"gover/delete.do"},tinymceId:"gover",pager:{data:[{id:"123456789",title:"灵璧广业·凯旋门项目二期规划 批前公示",provinceId:"340000",cityId:"341300",areaId:"341323",image:"http://www.lingbi.gov.cn/UploadFile/image/20171215/2017121516510522522.jpg",content:"萨拉就肯定是可否考虑对方是",governmentSource:"灵璧县政府网",sourceUrl:"http://www.szns.gov.cn/xxgk/qzfxxgkml/zcwj/qjzcwj/201712/t20171208_10200040.htm",governmentDate:"2017-12-15 00:00:00",dateRule:"123",status:"1"},{id:"123456789",title:"浍塘沟商贸城项目《建设工程规划许可证》批前公示",provinceId:"340000",cityId:"341300",areaId:"341323",image:"http://www.lingbi.gov.cn/UploadFile/image/20180102/20180102085222382238.jpg",content:"‘老师打卡记录是的会计分录",governmentSource:"灵璧县政府网",sourceUrl:"http://www.szns.gov.cn/xxgk/qzfxxgkml/zcwj/qjzcwj/201710/t20171012_9339847.htm",governmentDate:"2017-12-15 00:00:00",dateRule:"456",status:"0"},{id:"123456789",title:"中意制丝有限责任公司2.5万吨粮食仓储库建设项目《建设工程规划许可证》批前公示",provinceId:"340000",cityId:"341300",areaId:"341323",image:"http://www.lingbi.gov.cn/UploadFile/image/20171212/20171212161063206320.jpg",content:"的路上特任天堂官方",governmentSource:"灵璧县政府网",sourceUrl:"http://www.szns.gov.cn/xxgk/qzfxxgkml/zcwj/qjzcwj/201710/t20171012_9339848.htm",governmentDate:"2017-12-15 00:00:00",dateRule:"789",status:"1"}],url:"gover/dataGrid.do"},currDialog:"add",dialogShow:!1,dialogSubmitLoading:!1,previewModal:!1,previewData:{},chinaJson:{},derail_address_arr:[],derail_address_obj_sub:[],derail_address_obj_s:[],formSearch:{title:"",status:"",areaId:""},formDialog:{id:"",title:"",provinceId:"",cityId:"",areaId:"",image:"",content:"",governmentSource:"",sourceUrl:"",governmentDate:"",dateRule:"",status:""},columns:[{type:"selection",width:80,align:"center",fixed:"left"},{title:"标题",key:"title",width:200,sortable:!0},{title:"图片",key:"image",width:120,render:function(t,e){return""==e.row.image||"null"==e.row.image?t("span","暂无图片"):t("img",{style:{maxWidth:"100px",margin:"10px"},attrs:{src:e.row.image}})}},{title:"来源地址",key:"sourceUrl",width:250,render:function(t,e){return t("a",{style:{},attrs:{href:e.row.sourceUrl,target:"_blank"}},e.row.sourceUrl)}},{title:"所属省",key:"provinceId",width:180,sortable:!0,render:function(e,a){var r=t,o=[a.row.provinceId];return e("span",r.util.getProvinceCityArea(o,r.chinaJson))}},{title:"所属市",key:"cityId",width:180,sortable:!0,render:function(e,a){var r=t,o=[a.row.provinceId,a.row.cityId];return e("span",r.util.getProvinceCityArea(o,r.chinaJson))}},{title:"所属区",key:"areaId",width:180,sortable:!0,render:function(e,a){var r=t,o=[a.row.provinceId,a.row.cityId,a.row.areaId];return e("span",r.util.getProvinceCityArea(o,r.chinaJson))}},{title:"政务来源",key:"governmentSource",width:120,sortable:!0},{title:"政务发布时间",key:"governmentDate",width:180,sortable:!0},{title:"创建时间",key:"createTime",width:180,sortable:!0},{title:"时间规则",key:"dateRule",width:140,sortable:!0},{title:"状态",key:"status",width:80,render:function(t,e){return t("span",{0:"未发布",1:"已发布"}[e.row.status])}},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(e,a){var r=t;return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){r.policyPreview(a.index,a.row)}}},"预览"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){r.$store.commit("editRow",{vm:r,data:a.row,initDialog:r.initDialog(a.row)})}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){r.$Modal.confirm({title:"确认",content:"确认删除这条数据吗？",onOk:function(){r.$store.dispatch("delRow",a.row.id)}})}}},"删除")])}}],rules:{}}},methods:{addRow:function(){this.$store.commit("addRow",this)},resetDialogForm:function(t){this.derail_address_obj_sub=[],this.setContent(""),this.$refs[t].resetFields()},submitDialogForm:function(t){this.util.submitDialogForm(this,t)},searchAddrChange:function(t){this.formSearch.areaId=t[2]},subAddrChange:function(t){this.formDialog.provinceId=t[0],this.formDialog.cityId=t[1],this.formDialog.areaId=t[2]},handleSuccess:function(t){"SUCCESS"==t.state&&(this.$Message.success("上传成功！"),this.formDialog.image=t.url)},handleFormatError:function(){this.$Message.error("文件格式错误，请选择jpg,jpeg或png格式的文件")},policyPreview:function(t,e){var a=this,r=a.util.extend(e);"0"==r.status?r.status="未发布":r.status="已发布",r.provinceCityarea=a.util.getProvinceCityArea([r.provinceId,r.cityId,r.areaId],a.chinaJson,!0),a.previewData=r,a.previewModal=!0},resetPreview:function(){this.previewModal=!1,this.previewData={}},resetSearch:function(t){var e=this;e.formSearch.status="",e.formSearch.areaId="",e.derail_address_obj_s=[],e.$refs[t].resetFields(),e.submitSearch(t)},submitSearch:function(t){this.$store.dispatch("submitSearch",{vm:this,name:t})},setContent:function(t){var e="";t&&(e=t),window.tinymce.get(this.tinymceId).setContent(e)},updateContent:function(t){this.formDialog.content=t},initDialog:function(t){var e=this.util.extend(t);this.derail_address_obj_sub=[e.provinceId,e.cityId,e.areaId],this.setContent(e.content)},changePager:function(t){this.util.changePager(this,t)},paging:function(){this.util.paging(this)},initData:function(){this.chinaJson=JSON.parse(sessionStorage.chinaJson),this.derail_address_arr=JSON.parse(sessionStorage.chinaData)}},computed:{label:function(){return this.$store.state.label}},created:function(){var t=this;t.initData(),t.$store.commit("initPager",t),t.paging(t)},mounted:function(){},watch:{dialogShow:function(t){t||(this.currDialog="add")},derail_address_obj_sub:function(t){var e=this;t.length?(e.formDialog.provinceId=t[0],e.formDialog.cityId=t[1],e.formDialog.areaId=t[2]):(e.formDialog.provinceId="",e.formDialog.cityId="",e.formDialog.areaId="")}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"policy"},[a("Form",{ref:"formSearch",attrs:{model:t.formSearch,inline:"","label-width":60}},[a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"标题",size:"small"},model:{value:t.formSearch.title,callback:function(e){t.$set(t.formSearch,"title",e)},expression:"formSearch.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"关联地区"}},[a("Cascader",{staticStyle:{"margin-top":"5px"},attrs:{data:t.derail_address_arr,filterable:"",size:"small"},on:{"on-change":t.searchAddrChange},model:{value:t.derail_address_obj_s,callback:function(e){t.derail_address_obj_s=e},expression:"derail_address_obj_s"}})],1),t._v(" "),a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("Select",{staticStyle:{width:"80px"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:t.formSearch.status,callback:function(e){t.$set(t.formSearch,"status",e)},expression:"formSearch.status"}},[a("Option",{attrs:{value:"0"}},[t._v("未发布")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("已发布")])],1)],1),t._v(" "),a("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"ghost",size:"small"},on:{click:function(e){t.resetSearch("formSearch")}}},[t._v(t._s(t.label.clear))]),t._v(" "),a("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.submitSearch("formSearch")}}},[t._v(t._s(t.label.search))]),t._v(" "),a("Button",{staticStyle:{margin:"5px 8px 24px 0"},attrs:{type:"primary",size:"small"},on:{click:t.addRow}},[t._v(t._s(t.label.add))])],1),t._v(" "),a("mainTable",{attrs:{columns:t.columns,data:t.pager.data}}),t._v(" "),a("paging",{attrs:{total:t.pager.total,currPage:t.pager.currPage},on:{changePager:t.changePager,paging:t.paging}}),t._v(" "),a("Modal",{attrs:{title:t.label[t.currDialog],"mask-closable":!1,width:"950",styles:{top:"25px"}},on:{"on-cancel":function(e){t.resetDialogForm("formDialog")}},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}},[a("Form",{ref:"formDialog",staticStyle:{"max-width":"900px"},attrs:{model:t.formDialog,rules:t.rules,"label-width":90}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"标题",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入标题"},model:{value:t.formDialog.title,callback:function(e){t.$set(t.formDialog,"title",e)},expression:"formDialog.title"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"所属地区"}},[a("Cascader",{staticStyle:{"margin-top":"5px"},attrs:{data:t.derail_address_arr,filterable:""},on:{"on-change":t.subAddrChange},model:{value:t.derail_address_obj_sub,callback:function(e){t.derail_address_obj_sub=e},expression:"derail_address_obj_sub"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"政务来源",prop:"governmentSource"}},[a("Input",{attrs:{placeholder:"请输入政务来源"},model:{value:t.formDialog.governmentSource,callback:function(e){t.$set(t.formDialog,"governmentSource",e)},expression:"formDialog.governmentSource"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"来源地址",prop:"sourceUrl"}},[a("Input",{attrs:{placeholder:"请输入来源地址"},model:{value:t.formDialog.sourceUrl,callback:function(e){t.$set(t.formDialog,"sourceUrl",e)},expression:"formDialog.sourceUrl"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"政务发布时间",prop:"governmentDate"}},[a("Date-picker",{attrs:{type:"date",editable:!1,placeholder:"请选择日期"},model:{value:t.formDialog.governmentDate,callback:function(e){t.$set(t.formDialog,"governmentDate",e)},expression:"formDialog.governmentDate"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"政务时间规则",prop:"dateRule"}},[a("Input",{attrs:{placeholder:"请输入政务时间规则"},model:{value:t.formDialog.dateRule,callback:function(e){t.$set(t.formDialog,"dateRule",e)},expression:"formDialog.dateRule"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"图片",prop:"image"}},[a("Row",[a("Col",{attrs:{span:"12"}},[a("div",{staticStyle:{width:"100px",height:"100px",border:"1px solid #eee"}},[t.formDialog.image?a("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.formDialog.image}}):a("img",{staticStyle:{"max-width":"100%"},attrs:{src:"static/images/img-upload-default.png"}})])]),t._v(" "),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"12"}},[a("Upload",{attrs:{name:"upfile",action:"ueditor/upload.do","on-success":t.handleSuccess,"show-upload-list":!1,format:["jpg","jpeg","png"],"on-format-error":t.handleFormatError}},[a("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v(t._s(t.label.uploadImg))])],1)],1)],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择政务状态",clearable:""},model:{value:t.formDialog.status,callback:function(e){t.$set(t.formDialog,"status",e)},expression:"formDialog.status"}},[a("Option",{attrs:{value:"0"}},[t._v("未发布")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("已发布")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"内容",prop:"content"}},[a("tinymce",{attrs:{id:t.tinymceId},on:{updateContent:t.updateContent},model:{value:t.formDialog.content,callback:function(e){t.$set(t.formDialog,"content",e)},expression:"formDialog.content"}})],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){t.resetDialogForm("formDialog")}}},[t._v(t._s(t.label.clear))]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.dialogSubmitLoading},on:{click:function(e){t.submitDialogForm("formDialog")}}},[t._v(t._s(t.label.submit))])],1)],1),t._v(" "),a("Modal",{attrs:{id:"preview-modal",title:"预览",styles:{top:"50px"},"mask-closable":!1,width:"850"},on:{"on-cancel":t.resetPreview},model:{value:t.previewModal,callback:function(e){t.previewModal=e},expression:"previewModal"}},[a("Row",[a("Col",{staticClass:"title",attrs:{span:"24"}},[t._v("政务基本信息:")])],1),t._v(" "),a("Row",{attrs:{gutter:16,"class-name":"preview-row"}},[a("Col",{attrs:{span:"12"}},[t._v("标题:  "+t._s(t.previewData.title))]),t._v(" "),a("Col",{attrs:{span:"12",id:"preview-image"}},[t._v("图片:   "),a("img",{attrs:{src:t.previewData.image}})])],1),t._v(" "),a("Row",{attrs:{gutter:16,"class-name":"preview-row"}},[a("Col",{attrs:{span:"12"}},[t._v("所属地区:  "+t._s(t.previewData.provinceCityarea))]),t._v(" "),a("Col",{attrs:{span:"12"}},[t._v("政务来源:  "+t._s(t.previewData.governmentSource))])],1),t._v(" "),a("Row",{attrs:{gutter:16,"class-name":"preview-row"}},[a("Col",{attrs:{span:"12"}},[t._v("来源地址:  "),a("a",{attrs:{href:t.previewData.sourceUrl,target:"_blank"}},[t._v(t._s(t.previewData.sourceUrl))])]),t._v(" "),a("Col",{attrs:{span:"12"}},[t._v("政务发布时间:  "+t._s(t.previewData.governmentDate))])],1),t._v(" "),a("Row",{staticStyle:{"border-bottom":".5px solid #e9eaec","padding-bottom":"5px"},attrs:{gutter:16,"class-name":"preview-row"}},[a("Col",{attrs:{span:"12"}},[t._v("政务时间规则:  "+t._s(t.previewData.dateRule))]),t._v(" "),a("Col",{attrs:{span:"12"}},[t._v("状态:  "+t._s(t.previewData.status))])],1),t._v(" "),a("Row",{attrs:{"class-name":"preview-row"}},[a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"title"},[t._v("政务内容:")]),t._v(" "),a("div",{staticClass:"preview-txt",domProps:{innerHTML:t._s(t.previewData.content)}})])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.resetPreview}},[t._v(t._s(t.label.close))])],1)],1)],1)},staticRenderFns:[]};var n=a("Z0/y")(s,l,!1,function(t){a("31VF")},"data-v-2b47494e",null);e.default=n.exports}});